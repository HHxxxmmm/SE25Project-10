# 乘车人管理测试说明

## 功能概述
本测试集合用于验证乘车人管理功能，包括检查是否可以添加乘车人和添加乘车人两个主要功能。

## API接口

### 1. 检查是否可以添加乘车人
- **接口**: `GET /api/passenger/check-add/{userId}`
- **功能**: 检查指定用户是否可以添加乘车人（未满3人）
- **返回**: 
  - `allowed: true` - 可以添加
  - `allowed: false` - 不可以添加，并返回原因

### 2. 添加乘车人
- **接口**: `POST /api/passenger/add`
- **功能**: 为用户添加乘车人
- **参数**: 
  ```json
  {
    "userId": 用户ID,
    "realName": "真实姓名",
    "idCardNumber": "身份证号",
    "phoneNumber": "手机号",
    "passengerType": 乘客类型
  }
  ```
- **乘客类型**: 1-成人, 2-儿童, 3-学生, 4-残疾, 5-军人

## 测试用例

### 检查功能测试
1. **用户1（已满3人）** - 应该拒绝
2. **用户2（0人）** - 应该允许
3. **用户3（1人）** - 应该允许
4. **不存在的用户** - 应该返回用户不存在

### 添加功能测试
1. **添加成人乘客** - 用户2添加郑永军
2. **添加学生乘客** - 用户3添加舒明亮
3. **添加儿童乘客** - 用户4添加倪雪莲
4. **添加军人乘客** - 用户5添加庞宝林
5. **添加残疾乘客** - 用户6添加毛丽霞

### 乘客类型验证测试
1. **学生添加为成人** - 应该成功
2. **军人添加为成人** - 应该成功
3. **残疾添加为成人** - 应该成功
4. **儿童添加为成人** - 应该失败
5. **成人添加为儿童** - 应该失败

### 错误测试
1. **为已满用户添加** - 用户1尝试添加，应该失败
2. **添加不存在的乘客** - 应该返回信息无效
3. **添加已关联的乘客** - 应该返回已被添加
4. **信息不匹配** - 身份证号存在但姓名错误，应该失败

## 乘客类型规则
- **成人(1)**: 只能添加为成人
- **儿童(2)**: 只能添加为儿童
- **学生(3)**: 可以添加为学生或成人
- **残疾(4)**: 可以添加为残疾或成人
- **军人(5)**: 可以添加为军人或成人

## 关系类型
- **本人(1)**: 乘客ID与用户的passenger_id相同
- **其他(3)**: 乘客ID与用户的passenger_id不同

## 数据说明
基于现有数据：
- 用户1: related_passenger=3（已满）
- 用户2: related_passenger=0（可添加）
- 用户3: related_passenger=1（可添加）
- 乘客数据包含各种类型的真实乘客信息

## 使用方法
1. 导入 `postman_passenger_management.json` 到Postman
2. 设置环境变量 `baseUrl` 为 `http://localhost:8080`
3. 按顺序执行测试用例验证功能 