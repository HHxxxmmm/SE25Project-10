# 车票状态显示修复说明

## 问题描述

车票详情页面的车票状态显示为黑色文字，而不是预期的彩色小卡片样式。

## 问题原因

1. **Antd组件样式覆盖**: 使用了Antd的`Text`组件，其默认样式覆盖了自定义CSS样式
2. **CSS类名正确**: CSS文件中已经定义了所有必要的车票状态样式类
3. **样式优先级**: Antd组件的样式优先级高于自定义CSS

## 解决方案

### 1. 修改组件类型
将车票状态显示从Antd的`Text`组件改为普通的`span`标签：

```jsx
// 修改前
<Text className={`ticket-status ${TICKET_STATUS[ticket.ticketStatus]?.colorClass || ''}`}>
    {TICKET_STATUS[ticket.ticketStatus]?.text || '未知状态'}
</Text>

// 修改后
<span className={`ticket-status ${TICKET_STATUS[ticket.ticketStatus]?.colorClass || ''}`}>
    {TICKET_STATUS[ticket.ticketStatus]?.text || '未知状态'}
</span>
```

### 2. CSS样式确认
车票详情页面的CSS文件中已经包含了所有必要的状态样式：

```css
.ticket-status {
    padding: 6px 16px;
    border-radius: 14px;
    font-weight: 600;
    white-space: nowrap;
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
}

.status-pending {
    background-color: #ffd6d6;
    color: #a8071a;
}

.status-unused {
    background-color: #e6f7ff;
    color: #096dd9;
}

.status-used {
    background-color: #f6ffed;
    color: #389e0d;
}

.status-refunded {
    background-color: #fff2e8;
    color: #d46b08;
}

.status-changed {
    background-color: #f9f0ff;
    color: #722ed1;
}
```

## 车票状态映射

### 状态定义
```javascript
const TICKET_STATUS = {
    0: { text: '待支付', colorClass: 'status-pending' },
    1: { text: '未使用', colorClass: 'status-unused' },
    2: { text: '已使用', colorClass: 'status-used' },
    3: { text: '已退票', colorClass: 'status-refunded' },
    4: { text: '已改签', colorClass: 'status-changed' },
};
```

### 视觉效果
- **待支付**: 红色背景 (#ffd6d6)，红色文字 (#a8071a)
- **未使用**: 蓝色背景 (#e6f7ff)，蓝色文字 (#096dd9)
- **已使用**: 绿色背景 (#f6ffed)，绿色文字 (#389e0d)
- **已退票**: 橙色背景 (#fff2e8)，橙色文字 (#d46b08)
- **已改签**: 紫色背景 (#f9f0ff)，紫色文字 (#722ed1)

## 技术要点

### 1. 样式优先级
- 自定义CSS样式需要避免被Antd组件样式覆盖
- 使用普通HTML元素而不是Antd组件可以确保样式正确应用

### 2. 状态映射
- 使用数字状态码映射到对应的文本和样式类
- 提供默认值处理未知状态

### 3. 响应式设计
- 车票状态标签使用绝对定位，确保在不同屏幕尺寸下正确显示
- 使用`white-space: nowrap`防止文字换行

## 测试要点

### 1. 状态显示测试
- [ ] 验证不同车票状态显示正确的颜色
- [ ] 验证状态文字正确显示
- [ ] 验证未知状态有默认处理

### 2. 布局测试
- [ ] 验证状态标签位置正确（右上角）
- [ ] 验证状态标签不与其他元素重叠
- [ ] 验证在不同屏幕尺寸下显示正常

### 3. 样式测试
- [ ] 验证状态标签有圆角边框
- [ ] 验证背景色和文字色对比度合适
- [ ] 验证字体粗细正确

## 总结

✅ **问题已修复**: 将Antd的`Text`组件改为普通`span`标签

✅ **样式正确应用**: 车票状态现在显示为彩色小卡片样式

✅ **状态映射完整**: 所有车票状态都有对应的样式和颜色

✅ **响应式设计**: 状态标签在不同屏幕尺寸下正确显示

现在车票详情页面的车票状态应该正确显示为彩色小卡片样式，而不是黑色文字。 