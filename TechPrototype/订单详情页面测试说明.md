# 订单详情页面测试说明

## 功能概述
订单详情页面显示特定订单的详细信息，包括订单基本信息、车次信息、车票列表等。

## 页面路径
- 前端页面：`/order-detail?orderId={orderId}`
- 后端API：`GET /api/orders/detail?userId={userId}&orderId={orderId}`

## 测试步骤

### 1. 基本功能测试

#### 1.1 页面加载测试
1. 从"我的订单"页面点击任意订单
2. 验证页面正确跳转到订单详情页面
3. 验证URL参数包含正确的orderId
4. 验证页面显示加载状态

#### 1.2 数据展示测试
1. 验证订单基本信息正确显示：
   - 订单号
   - 下单时间
   - 订单状态（带颜色标识）
2. 验证车次信息正确显示：
   - 出发日期（仅显示日期，不显示时间）
   - 车次号
   - 出发站和到达站
   - 出发时间和到达时间
3. 验证车票列表正确显示：
   - 乘客姓名
   - 身份证号
   - 乘客类型
   - 席别
   - 票种
   - 车票状态
   - 票价

### 2. 交互功能测试

#### 2.1 车票详情跳转
1. 点击车票列表中的任意车票行
2. 验证正确跳转到车票详情页面
3. 验证URL包含正确的ticketId参数

#### 2.2 订单操作按钮
1. **待支付订单**：
   - 显示"去支付"和"取消订单"按钮
   - 点击"去支付"跳转到支付页面
   - 点击"取消订单"调用取消订单API
2. **已支付订单**：
   - 显示"退票"和"改签"按钮
   - 点击"退票"跳转到退票页面
   - 点击"改签"跳转到改签页面
3. **已完成订单**：
   - 显示"退票"和"改签"按钮
4. **已取消订单**：
   - 不显示任何操作按钮

#### 2.3 返回功能
1. 点击"返回"链接
2. 验证正确返回到"我的订单"页面

### 3. 错误处理测试

#### 3.1 参数缺失
1. 直接访问`/order-detail`（无orderId参数）
2. 验证显示错误提示并跳转到订单列表

#### 3.2 订单不存在
1. 使用不存在的orderId访问页面
2. 验证显示"订单不存在"提示

#### 3.3 网络错误
1. 模拟网络请求失败
2. 验证显示错误提示信息

### 4. 数据格式验证

#### 4.1 日期时间格式
- 下单时间：显示为"YYYY-MM-DD HH:mm"格式
- 出发日期：仅显示"YYYY-MM-DD"格式
- 出发/到达时间：显示为"HH:mm"格式

#### 4.2 状态映射
- 订单状态：0-待支付，1-已支付，2-已完成，3-已取消
- 乘客类型：1-成人，2-儿童，3-学生，4-残疾，5-军人
- 票种：1-成人票，2-儿童票，3-学生票，4-残疾票，5-军人票
- 车票状态：0-待支付，1-已支付，2-已完成，3-已退票，4-已改签

### 5. 样式验证

#### 5.1 响应式布局
1. 在不同屏幕尺寸下测试页面布局
2. 验证表格在小屏幕下的显示效果

#### 5.2 状态颜色
- 待支付：橙色
- 已支付：绿色
- 已完成：蓝色
- 已取消：灰色

### 6. API接口测试

#### 6.1 请求参数
```javascript
GET /api/orders/detail?userId=1&orderId=123
```

#### 6.2 响应数据格式
```json
{
  "orderNumber": "ORD202507100001",
  "orderStatus": 1,
  "orderTime": "2025-07-10T10:30:00",
  "paymentTime": "2025-07-10T10:35:00",
  "paymentMethod": "支付宝",
  "totalAmount": 299.00,
  "ticketCount": 2,
  "trainNumber": "G101",
  "travelDate": "2025-07-15",
  "departureTime": "08:00",
  "arrivalTime": "12:30",
  "departureStation": "北京南站",
  "arrivalStation": "上海虹桥站",
  "tickets": [
    {
      "ticketId": 1,
      "ticketNumber": "T202507100001",
      "passengerName": "张三",
      "idCardNumber": "110101199001011234",
      "passengerType": 1,
      "ticketType": 1,
      "carriageType": "二等座",
      "carriageNumber": "08",
      "seatNumber": "12A",
      "price": 149.50,
      "ticketStatus": 1
    }
  ]
}
```

### 7. 性能测试

#### 7.1 加载时间
1. 测试页面首次加载时间
2. 测试数据请求响应时间

#### 7.2 内存使用
1. 监控页面内存使用情况
2. 验证无内存泄漏

### 8. 兼容性测试

#### 8.1 浏览器兼容性
- Chrome
- Firefox
- Safari
- Edge

#### 8.2 设备兼容性
- 桌面端
- 平板端
- 移动端

## 测试数据准备

### 测试订单数据
确保数据库中有以下测试订单：
1. 待支付订单（orderStatus=0）
2. 已支付订单（orderStatus=1）
3. 已完成订单（orderStatus=2）
4. 已取消订单（orderStatus=3）

### 测试用户
使用userId=1作为测试用户，确保该用户有多个不同状态的订单。

## 注意事项

1. 订单详情页面需要验证订单归属权，只能查看自己的订单
2. 日期时间格式需要正确处理时区问题
3. 车票状态需要与订单状态保持一致
4. 操作按钮的显示需要根据订单状态动态调整
5. 错误处理需要提供友好的用户提示 